
local player = game.Players.LocalPlayer
local noclipEnabled = false
local lastPromptCheck = 0


local function toggleNoclip()
    noclipEnabled = not noclipEnabled

    for _, part in pairs(player.Character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = not noclipEnabled
        end
    end
end

game:GetService("RunService").Stepped:Connect(function()
    if noclipEnabled and player.Character then
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") and part.CanCollide then
                part.CanCollide = false
            end
        end
    end
end)

local function sendNotification(title, text, duration)
    game.StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = text,
        Duration = duration or 4
    })
end

local function autoTriggerProximityPrompts()
    for _, prompt in pairs(workspace:GetDescendants()) do
        if prompt:IsA("ProximityPrompt") and prompt.Enabled then
            fireproximityprompt(prompt)
        end
    end
end

local function checkProximityPromptUsage()
    if os.time() - lastPromptCheck < 10 then return end
    lastPromptCheck = os.time()

    local usedPrompt = false
    for _, prompt in pairs(workspace:GetDescendants()) do
        if prompt:IsA("ProximityPrompt") and prompt.Enabled then
            usedPrompt = true
            break
        end
    end

    if not usedPrompt then
        sendNotification("Wait 10 Minutes", "You Need to Wait 10 Minutes To Crank The Lever", 6)
    end
end

local function rejoinServer()
    local tpService = game:GetService("TeleportService")
    local placeId = game.PlaceId
    tpService:Teleport(placeId, player)
end

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/liebertsx/Tora-Library/main/src/librarynew", true))()
local window = library:CreateWindow("DEAD RAILS")

window:AddButton({
    text = "BYPASS TO END",
    callback = function()
        toggleNoclip()
        sendNotification("Spam Button If Not Teleported", "Keep clicking if teleport fails", 4)
        wait(1)
        player.Character:PivotTo(CFrame.new(Vector3.new(-346, -69, -49060)))
        sendNotification("Wait 10 Minutes", "You Should Wait 10 Minutes To Crank The Lever", 6)
    end
})

window:AddButton({
    text = "TOGGLE NOCLIP",
    callback = function()
        toggleNoclip()
        local status = noclipEnabled and "Enabled" or "Disabled"
        sendNotification("NoClip Status", "NoClip is now " .. status, 4)
    end
})

window:AddButton({
    text = "SERVER REJOIN",
    callback = function()
        sendNotification("Rejoining...", "You are rejoining the server", 3)
        rejoinServer()
    end
})

window:AddLabel({
    text = "Credits: Anas & Shidou & Player",
    type = "label"
})

game:GetService("RunService").Stepped:Connect(checkProximityPromptUsage)
spawn(autoTriggerProximityPrompts)

library:Init()
